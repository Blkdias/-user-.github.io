<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Controle de Licita√ß√µes - Secretaria de Sa√∫de</title>
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
    <style>
        /* ... (todo o CSS permanece exatamente igual ao seu com aba de sincroniza√ß√£o) ... */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #1a237e, #283593);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4caf50, #2196f3, #ff9800);
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }
        .description {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 300;
        }
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 3px solid #3949ab;
            flex-wrap: wrap;
        }
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            background: #e9ecef;
            font-weight: 600;
            border-right: 1px solid #dee2e6;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .tab:hover {
            background: #dee2e6;
            transform: translateY(-2px);
        }
        .tab.active {
            background: #3949ab;
            color: white;
            box-shadow: 0 4px 8px rgba(57, 73, 171, 0.3);
        }
        .tab i {
            font-size: 1.2rem;
        }
        .tab-content {
            display: none;
            padding: 30px;
            min-height: 600px;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .tab-content.active {
            display: block;
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
            border-left: 5px solid #3949ab;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        .card h3 {
            color: #3949ab;
            margin-bottom: 15px;
            font-size: 1.1rem;
            font-weight: 600;
        }
        .card .value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #1a237e;
            margin: 10px 0;
        }
        .card .trend {
            font-size: 0.9rem;
            padding: 4px 12px;
            border-radius: 20px;
            display: inline-block;
        }
        .trend.up {
            background: #e8f5e9;
            color: #2e7d32;
        }
        .trend.down {
            background: #ffebee;
            color: #c62828;
        }
        /* ESTILOS DA TABELA COM SCROLL */
        .table-container {
            width: 100%;
            overflow-x: auto;
            margin: 25px 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            position: relative;
        }
        .table-container.scrollable::after {
            content: '‚Üî Arraste para os lados';
            position: absolute;
            right: 10px;
            bottom: 10px;
            background: rgba(57, 73, 171, 0.9);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            opacity: 0.8;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1200px;
            font-size: 0.95rem;
        }
        th, td {
            padding: 15px 20px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
            white-space: nowrap;
        }
        th {
            background: linear-gradient(135deg, #3949ab, #5c6bc0);
            color: white;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        /* COLUNA A√á√ïES FIXA */
        th:last-child,
        td:last-child {
            position: sticky;
            right: 0;
            background: white;
            z-index: 10;
            box-shadow: -2px 0 5px rgba(0,0,0,0.1);
            min-width: 180px;
            text-align: center;
        }
        th:last-child {
            background: linear-gradient(135deg, #283593, #3949ab);
        }
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        tr:nth-child(even) td:last-child {
            background: #f8f9fa;
        }
        tr:hover {
            background-color: #f1f3f9;
        }
        tr:hover td:last-child {
            background: #f1f3f9;
        }
        /* MELHORIAS PARA DESTACAR INFORMA√á√ïES IMPORTANTES */
        .destaque-valor {
            font-weight: 700;
            color: #1a237e;
            background: #f0f4ff;
            padding: 4px 8px;
            border-radius: 4px;
            border-left: 3px solid #3949ab;
        }
        .destaque-valor-final {
            font-weight: 700;
            color: #2e7d32;
            background: #f1f8e9;
            padding: 4px 8px;
            border-radius: 4px;
            border-left: 3px solid #4caf50;
        }
        .destaque-situacao {
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 20px;
            text-align: center;
            display: inline-block;
            min-width: 120px;
        }
        .status {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            display: inline-block;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            min-width: 120px;
            text-align: center;
        }
        .status-andamento { background: #fff8e1; color: #ff8f00; border: 2px solid #ffc107; }
        .status-concluida { background: #e8f5e9; color: #2e7d32; border: 2px solid #4caf50; }
        .status-suspensa { background: #ffebee; color: #c62828; border: 2px solid #f44336; }
        .status-em-edital { background: #e3f2fd; color: #1565c0; border: 2px solid #2196f3; }
        .status-deserta { background: #f5f5f5; color: #616161; border: 2px solid #9e9e9e; }
        .status-revogada { background: #ffccbc; color: #d84315; border: 2px solid #ff5722; }
        .status-recurso { background: #f3e5f5; color: #7b1fa2; border: 2px solid #9c27b0; }
        .status-homologacao { background: #e8f5e9; color: #2e7d32; border: 2px solid #4caf50; }
        .status-contrato { background: #e1f5fe; color: #0277bd; border: 2px solid #03a9f4; }
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin: 2px;
        }
        .badge-success { background: #e8f5e9; color: #2e7d32; }
        .badge-warning { background: #fff8e1; color: #ff8f00; }
        .badge-info { background: #e3f2fd; color: #1565c0; }
        .warning {
            background: linear-gradient(135deg, #fff8e1, #ffecb3);
            border-left: 5px solid #ffc107;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.2);
        }
        .filters {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            align-items: end;
        }
        .btn {
            background: linear-gradient(135deg, #3949ab, #5c6bc0);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(57, 73, 171, 0.3);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #78909c, #90a4ae);
        }
        .btn-danger {
            background: linear-gradient(135deg, #d32f2f, #f44336);
        }
        .btn-success {
            background: linear-gradient(135deg, #388e3c, #4caf50);
        }
        .btn-warning {
            background: linear-gradient(135deg, #f57c00, #ff9800);
        }
        .btn-acao {
            padding: 8px 16px;
            margin: 2px;
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #3949ab;
        }
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3949ab;
            box-shadow: 0 0 0 3px rgba(57, 73, 171, 0.1);
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }
        .modal-content {
            background: white;
            margin: 40px auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
        }
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .close:hover {
            color: #333;
        }
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .export-options {
            display: flex;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-top: 25px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        .calendar-day {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            min-height: 120px;
            background: #fafafa;
            font-size: 1rem;
            position: relative;
            transition: all 0.3s ease;
        }
        .calendar-day:hover {
            background: #f0f0f0;
            transform: scale(1.02);
        }
        .calendar-day.header {
            background: linear-gradient(135deg, #3949ab, #5c6bc0);
            color: white;
            text-align: center;
            font-weight: bold;
            min-height: auto;
            border: none;
        }
        .calendar-day.empty {
            background: #f5f5f5;
            border: 2px dashed #ddd;
        }
        .calendar-day.today {
            background: #e3f2fd;
            border-color: #2196f3;
        }
        .calendar-event {
            background: #e8eaf6;
            padding: 8px;
            margin-top: 8px;
            border-radius: 6px;
            font-size: 0.85rem;
            border-left: 4px solid #3949ab;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .calendar-event:hover {
            background: #c5cae9;
            transform: translateX(5px);
        }
        .calendar-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .config-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        .config-table input, .config-table select {
            width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 8px;
        }
        .backup-section {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
            border-left: 5px solid #4caf50;
        }
        .backup-status {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 1rem;
        }
        .backup-success {
            background: #e8f5e9;
            color: #2e7d32;
            border: 2px solid #4caf50;
        }
        .backup-error {
            background: #ffebee;
            color: #c62828;
            border: 2px solid #f44336;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            transition: width 0.3s ease;
        }
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            .tab {
                justify-content: center;
            }
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .filters {
                grid-template-columns: 1fr;
            }
            .form-row {
                grid-template-columns: 1fr;
            }
            .export-options {
                flex-direction: column;
            }
            .calendar {
                gap: 5px;
            }
            .calendar-day {
                min-height: 80px;
                font-size: 0.8rem;
                padding: 8px;
            }
            .calendar-event {
                font-size: 0.7rem;
                padding: 4px;
            }
            .modal-content {
                width: 95%;
                margin: 20px auto;
                padding: 20px;
            }
            .table-container::after {
                content: '‚Üî';
                font-size: 0.7rem;
                padding: 3px 8px;
            }
            .status {
                min-width: 100px;
                font-size: 0.75rem;
                padding: 6px 10px;
            }
        }
        .search-box {
            position: relative;
            margin-bottom: 20px;
        }
        .search-box input {
            padding-left: 40px;
        }
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }
        .stats-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 10000;
            animation: slideInRight 0.3s ease;
        }
        .notification.success { background: #4caf50; }
        .notification.error { background: #f44336; }
        .notification.warning { background: #ff9800; }
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        /* Tooltip para c√©lulas com texto muito longo */
        td[title]:hover::after {
            content: attr(title);
            position: absolute;
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: normal;
            z-index: 1000;
            max-width: 300px;
        }
        /* Indicadores visuais para valores */
        .indicador-economia {
            font-size: 0.8rem;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 5px;
        }
        .economia-positiva {
            background: #e8f5e9;
            color: #2e7d32;
        }
        .economia-negativa {
            background: #ffebee;
            color: #c62828;
        }
        /* Novos estilos para sincroniza√ß√£o */
        .sync-section {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
            border-left: 5px solid #2196f3;
        }
        .sync-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.7);
        }
        .sync-status.online {
            border-left: 4px solid #4caf50;
        }
        .sync-status.offline {
            border-left: 4px solid #f44336;
        }
        .sync-status.syncing {
            border-left: 4px solid #ff9800;
        }
        .sync-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        .indicator-online { background: #4caf50; }
        .indicator-offline { background: #f44336; }
        .indicator-syncing { 
            background: #ff9800; 
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè• Sistema de Controle de Licita√ß√µes</h1>
            <p class="description">Secretaria Municipal de Sa√∫de - Gest√£o completa de processos licitat√≥rios</p>
        </header>
        <div class="tabs">
            <div class="tab active" onclick="showTab('dashboard')">
                <i>üìä</i> Dashboard
            </div>
            <div class="tab" onclick="showTab('licitacoes')">
                <i>üìã</i> Licita√ß√µes
            </div>
            <div class="tab" onclick="showTab('calendario')">
                <i>üìÖ</i> Calend√°rio
            </div>
            <div class="tab" onclick="showTab('relatorios')">
                <i>üìà</i> Relat√≥rios
            </div>
            <div class="tab" onclick="showTab('configuracoes')">
                <i>‚öôÔ∏è</i> Configura√ß√µes
            </div>
            <div class="tab" onclick="showTab('sincronizacao')">
                <i>‚òÅÔ∏è</i> Sincroniza√ß√£o
            </div>
        </div>
        <!-- DASHBOARD -->
        <div id="dashboard" class="tab-content active">
            <div class="dashboard-grid">
                <div class="card">
                    <h3>üìä Total de Licita√ß√µes</h3>
                    <div class="value" id="total-licitacoes">0</div>
                    <div class="trend up">+12% este m√™s</div>
                </div>
                <div class="card">
                    <h3>‚è≥ Em Andamento</h3>
                    <div class="value" id="em-andamento">0</div>
                    <div class="trend up">+5% esta semana</div>
                </div>
                <div class="card">
                    <h3>‚úÖ Conclu√≠das</h3>
                    <div class="value" id="concluidas">0</div>
                    <div class="trend down">-2% este m√™s</div>
                </div>
                <div class="card">
                    <h3>üí∞ Valor Total</h3>
                    <div class="value" id="valor-total">R$ 0,00</div>
                    <div class="trend up">+8% este trimestre</div>
                </div>
            </div>
            <div class="warning" id="alertas">
                <strong>‚ö†Ô∏è Aten√ß√£o:</strong> <span id="alertas-texto">Carregando alertas do sistema...</span>
            </div>
            <div class="stats-container">
                <div class="chart-container">
                    <h3>üìà Distribui√ß√£o por Situa√ß√£o</h3>
                    <table id="tabela-situacao">
                        <thead>
                            <tr>
                                <th>Situa√ß√£o</th>
                                <th>Quantidade</th>
                                <th>Valor Total</th>
                                <th>Percentual</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="chart-container">
                    <h3>‚è∞ Pr√≥ximos Vencimentos</h3>
                    <table id="tabela-vencimentos">
                        <thead>
                            <tr>
                                <th>N¬∫ Licita√ß√£o</th>
                                <th>Data</th>
                                <th>Dias</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- LICITA√á√ïES -->
        <div id="licitacoes" class="tab-content">
            <h2>üìã Controle de Licita√ß√µes</h2>
            <div class="filters">
                <div class="form-group">
                    <label for="filtro-status">üìä Status:</label>
                    <select id="filtro-status">
                        <option value="">Todos os status</option>
                        <option value="Em andamento">Em Andamento</option>
                        <option value="Conclu√≠da">Conclu√≠da</option>
                        <option value="Suspensa">Suspensa</option>
                        <option value="Em edital">Em Edital</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="filtro-modalidade">üè∑Ô∏è Modalidade:</label>
                    <select id="filtro-modalidade">
                        <option value="">Todas as modalidades</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="filtro-setor">üè¢ Setor:</label>
                    <select id="filtro-setor">
                        <option value="">Todos os setores</option>
                    </select>
                </div>
                <div class="form-group">
                    <button class="btn" onclick="filtrarLicitacoes()">üîç Filtrar</button>
                    <button class="btn btn-secondary" onclick="limparFiltros()">üîÑ Limpar</button>
                </div>
            </div>
            <div class="export-options">
                <button class="btn btn-success" onclick="adicionarLicitacao()">
                    ‚ûï Nova Licita√ß√£o
                </button>
                <button class="btn btn-secondary" onclick="window.print()">
                    üñ®Ô∏è Imprimir
                </button>
                <button class="btn btn-warning" onclick="exportarExcel()">
                    üìä Exportar Excel
                </button>
            </div>
            <div class="search-box">
                <i>üîç</i>
                <input type="text" id="pesquisa" placeholder="Pesquisar licita√ß√µes..." onkeyup="pesquisarLicitacoes()">
            </div>
            <!-- RESUMO R√ÅPIDO -->
            <div class="dashboard-grid" style="margin-bottom: 20px;">
                <div class="card">
                    <h3>üí∞ Valor Total em Licita√ß√µes</h3>
                    <div class="value" id="resumo-valor-total">R$ 0,00</div>
                    <div class="badge badge-info" id="resumo-quantidade">0 licita√ß√µes</div>
                </div>
                <div class="card">
                    <h3>üìä Situa√ß√£o Atual</h3>
                    <div class="value" id="resumo-situacao-destaque">-</div>
                    <div class="badge badge-warning" id="resumo-andamento">0 em andamento</div>
                </div>
                <div class="card">
                    <h3>üíµ Economia Total</h3>
                    <div class="value" id="resumo-economia">R$ 0,00</div>
                    <div class="badge badge-success" id="resumo-economia-percentual">0%</div>
                </div>
            </div>
            <!-- TABELA COM SCROLL HORIZONTAL -->
            <div class="table-container" id="table-container">
                <table id="tabela-licitacoes">
                    <thead>
                        <tr>
                            <th>N¬∫ Licita√ß√£o</th>
                            <th>Objeto</th>
                            <th>Modalidade</th>
                            <th>Setor</th>
                            <th>Valor Estimado</th>
                            <th>Valor Final</th>
                            <th>Economia</th>
                            <th>Situa√ß√£o</th>
                            <th>Data Abertura</th>
                            <th>Data Conclus√£o</th>
                            <th>Respons√°vel</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
        <!-- CALEND√ÅRIO -->
        <div id="calendario" class="tab-content">
            <h2>üìÖ Calend√°rio de Licita√ß√µes</h2>
            <div class="calendar-navigation">
                <button class="btn" onclick="mudarMes(-1)">‚¨ÖÔ∏è M√™s Anterior</button>
                <h3 id="calendario-titulo">Carregando...</h3>
                <button class="btn" onclick="mudarMes(1)">Pr√≥ximo M√™s ‚û°Ô∏è</button>
            </div>
            <div class="quick-actions">
                <button class="btn" onclick="mostrarMesAtual()">üìÖ M√™s Atual</button>
                <button class="btn" onclick="mostrarProximoMes()">‚è≠Ô∏è Pr√≥ximo M√™s</button>
                <button class="btn" onclick="filtrarCalendarioHoje()">‚≠ê Hoje</button>
                <button class="btn" onclick="exportarCalendario()">üì• Exportar</button>
            </div>
            <div class="calendar" id="calendario-container"></div>
            <h3>üìã Pr√≥ximos Eventos (15 dias)</h3>
            <table id="tabela-eventos">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>N¬∫ Licita√ß√£o</th>
                        <th>Objeto</th>
                        <th>Etapa</th>
                        <th>Respons√°vel</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <!-- RELAT√ìRIOS -->
        <div id="relatorios" class="tab-content">
            <h2>üìà Relat√≥rios Anal√≠ticos</h2>
            <div class="dashboard-grid">
                <div class="card">
                    <h3>üìä Relat√≥rio por Situa√ß√£o</h3>
                    <p>Resumo detalhado das licita√ß√µes por status</p>
                    <button class="btn" onclick="gerarRelatorio('situacao')">Gerar Relat√≥rio</button>
                </div>
                <div class="card">
                    <h3>üè∑Ô∏è Relat√≥rio por Modalidade</h3>
                    <p>An√°lise comparativa por tipo de licita√ß√£o</p>
                    <button class="btn" onclick="gerarRelatorio('modalidade')">Gerar Relat√≥rio</button>
                </div>
                <div class="card">
                    <h3>üí∞ Relat√≥rio Financeiro</h3>
                    <p>Dados financeiros e acompanhamento</p>
                    <button class="btn" onclick="gerarRelatorio('financeiro')">Gerar Relat√≥rio</button>
                </div>
                <div class="card">
                    <h3>‚è∞ Relat√≥rio de Prazos</h3>
                    <p>Licita√ß√µes pr√≥ximas do vencimento</p>
                    <button class="btn" onclick="gerarRelatorio('prazos')">Gerar Relat√≥rio</button>
                </div>
            </div>
            <div id="resultado-relatorio" style="margin-top: 30px;"></div>
        </div>
        <!-- CONFIGURA√á√ïES -->
        <div id="configuracoes" class="tab-content">
            <h2>‚öôÔ∏è Configura√ß√µes do Sistema</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="secretaria">üè¢ Nome da Secretaria:</label>
                    <input type="text" id="secretaria" value="Secretaria Municipal de Sa√∫de">
                </div>
                <div class="form-group">
                    <label for="responsavel">üë§ Respons√°vel:</label>
                    <input type="text" id="responsavel" value="Jo√£o da Silva">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="email">üìß E-mail para notifica√ß√µes:</label>
                    <input type="email" id="email" value="licitacoes@saude.example.com">
                </div>
                <div class="form-group">
                    <label for="diasAlerta">‚è∞ Dias para alerta de vencimento:</label>
                    <input type="number" id="diasAlerta" value="7" min="1" max="30">
                </div>
            </div>
            <div class="backup-section">
                <h3>üíæ Sistema de Backup e Restaura√ß√£o</h3>
                <div class="export-options">
                    <button class="btn btn-success" onclick="exportarBackup()">
                        üì§ Exportar Backup Completo
                    </button>
                    <button class="btn btn-secondary" onclick="importarBackup()">
                        üì• Importar Backup
                    </button>
                    <button class="btn btn-warning" onclick="fazerBackupAutomatico()">
                        üîÑ Backup Autom√°tico
                    </button>
                </div>
                <div id="status-backup" class="backup-status"></div>
                <p><small>√öltimo backup: <span id="ultimo-backup">Nunca</span></small></p>
                <div class="progress-bar">
                    <div class="progress" id="progresso-backup" style="width: 0%"></div>
                </div>
            </div>
            <h3>üè∑Ô∏è Modalidades de Licita√ß√£o</h3>
            <table class="config-table">
                <thead>
                    <tr>
                        <th>Modalidade</th>
                        <th>Descri√ß√£o</th>
                        <th>Ativa</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="modalidades-body"></tbody>
            </table>
            <button class="btn btn-success" onclick="adicionarModalidade()">
                ‚ûï Adicionar Modalidade
            </button>
            <h3>üè¢ Setores</h3>
            <table class="config-table">
                <thead>
                    <tr>
                        <th>Nome do Setor</th>
                        <th>Respons√°vel</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="setores-body"></tbody>
            </table>
            <button class="btn btn-success" onclick="adicionarSetor()">
                ‚ûï Adicionar Setor
            </button>
            <div class="export-options" style="margin-top: 30px;">
                <button class="btn" onclick="salvarConfiguracoes()">üíæ Salvar Configura√ß√µes</button>
                <button class="btn btn-secondary" onclick="restaurarPadroes()">üîÑ Restaurar Padr√µes</button>
                <button class="btn btn-danger" onclick="limparDados()">üóëÔ∏è Limpar Todos os Dados</button>
            </div>
        </div>
        <!-- NOVA ABA: SINCRONIZA√á√ÉO -->
        <div id="sincronizacao" class="tab-content">
            <h2>‚òÅÔ∏è Sincroniza√ß√£o em Nuvem</h2>
            <div class="sync-section">
                <h3>üîó Status da Sincroniza√ß√£o</h3>
                <div id="sync-status" class="sync-status">
                    <span class="sync-indicator" id="sync-indicator"></span>
                    <span id="sync-message">Verificando status...</span>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Modo de Sincroniza√ß√£o:</label>
                        <select id="sync-mode" onchange="alterarModoSincronizacao()" disabled>
                            <option value="firebase" selected>Firebase</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Frequ√™ncia de Sincroniza√ß√£o:</label>
                        <select id="sync-frequency" onchange="alterarModoSincronizacao()">
                            <option value="manual">Manual</option>
                            <option value="5min">A cada 5 minutos</option>
                            <option value="15min">A cada 15 minutos</option>
                            <option value="30min">A cada 30 minutos</option>
                            <option value="1h">A cada 1 hora</option>
                        </select>
                    </div>
                </div>
                <div class="export-options">
                    <button class="btn btn-success" onclick="sincronizarAgora()">
                        üîÑ Sincronizar Agora
                    </button>
                    <button class="btn btn-warning" onclick="carregarDoFirebase()">
                        üì• Recarregar do Firebase
                    </button>
                </div>
            </div>
            <div class="dashboard-grid">
                <div class="card">
                    <h3>üî• Firebase</h3>
                    <p>Banco de dados em tempo real</p>
                    <div id="firebase-status" class="sync-status">
                        <span class="sync-indicator indicator-offline"></span>
                        <span>Conectando...</span>
                    </div>
                </div>
                <div class="card">
                    <h3>üíæ √öltima Sincroniza√ß√£o</h3>
                    <div id="last-sync" class="sync-status">
                        <span>Nunca sincronizado</span>
                    </div>
                </div>
            </div>
            <h3>üìà Hist√≥rico de Sincroniza√ß√£o</h3>
            <table class="config-table">
                <thead>
                    <tr>
                        <th>Data/Hora</th>
                        <th>Tipo</th>
                        <th>Status</th>
                        <th>Itens Sincronizados</th>
                    </tr>
                </thead>
                <tbody id="sync-history"></tbody>
            </table>
        </div>
    </div>
    <!-- MODAL LICITA√á√ÉO -->
    <div id="modal-licitacao" class="modal">
        <div class="modal-content">
            <span class="close" onclick="fecharModal()">&times;</span>
            <h2 id="modal-titulo">‚ûï Nova Licita√ß√£o</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="numero-licitacao">üî¢ N¬∫ Licita√ß√£o:</label>
                    <input type="text" id="numero-licitacao" required placeholder="Ex: 001/2024">
                </div>
                <div class="form-group">
                    <label for="objeto">üìù Objeto:</label>
                    <input type="text" id="objeto" required placeholder="Descri√ß√£o do objeto da licita√ß√£o">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="modalidade">üè∑Ô∏è Modalidade:</label>
                    <select id="modalidade" required>
                        <option value="">Selecione a modalidade...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="setor">üè¢ Setor:</label>
                    <select id="setor" required>
                        <option value="">Selecione o setor...</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="valor">üí∞ Valor Estimado (R$):</label>
                    <input type="number" id="valor" step="0.01" min="0" required placeholder="0,00">
                </div>
                <div class="form-group">
                    <label for="valor-final">üíµ Valor Final (R$):</label>
                    <input type="number" id="valor-final" step="0.01" min="0" placeholder="0,00">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="situacao">üìä Situa√ß√£o:</label>
                    <select id="situacao" required>
                        <option value="">Selecione a situa√ß√£o...</option>
                        <option value="Em andamento">Em andamento</option>
                        <option value="Conclu√≠da">Conclu√≠da</option>
                        <option value="Suspensa">Suspensa</option>
                        <option value="Em edital">Em edital</option>
                        <option value="Deserta">Deserta</option>
                        <option value="Revogada">Revogada</option>
                        <option value="Recurso">Recurso</option>
                        <option value="Homologa√ß√£o">Homologa√ß√£o</option>
                        <option value="Contrato">Contrato</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="data-abertura">üìÖ Data Abertura:</label>
                    <input type="date" id="data-abertura" required>
                </div>
                <div class="form-group">
                    <label for="data-conclusao">‚è∞ Data Prev. Conclus√£o:</label>
                    <input type="date" id="data-conclusao" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="responsavel-modal">üë§ Respons√°vel:</label>
                    <input type="text" id="responsavel-modal" required placeholder="Nome do respons√°vel">
                </div>
            </div>
            <div class="form-group">
                <label for="observacoes">üìã Observa√ß√µes:</label>
                <textarea id="observacoes" rows="3" placeholder="Observa√ß√µes adicionais..."></textarea>
            </div>
            <div class="export-options">
                <button class="btn btn-success" onclick="salvarLicitacao()">üíæ Salvar Licita√ß√£o</button>
                <button class="btn btn-secondary" onclick="fecharModal()">‚ùå Cancelar</button>
            </div>
        </div>
    </div>
    <script>
        // =============================================
        // CONFIGURA√á√ÉO DO FIREBASE (J√Å PR√â-PREENCHIDA!)
        // =============================================
        const firebaseConfig = {
          apiKey: "AIzaSyCaCvDzlXDH7RrBJAgQtYcfZEuWlWJIeC4",
          authDomain: "controle-de-licitacao-saude.firebaseapp.com",
          databaseURL: "https://controle-de-licitacao-saude-default-rtdb.firebaseio.com",
          projectId: "controle-de-licitacao-saude",
          storageBucket: "controle-de-licitacao-saude.firebasestorage.app",
          messagingSenderId: "681424691661",
          appId: "1:681424691661:web:c7c27174260919bbee2484",
          measurementId: "G-YV45FPG358"
        };

        // Vari√°veis globais
        let licitacoes = [];
        let setores = [];
        let modalidades = [];
        let editandoId = null;
        let mesAtual = new Date().getMonth();
        let anoAtual = new Date().getFullYear();
        let usandoFirebase = false;
        let firebaseDatabase = null;
        let syncConfig = {
            mode: 'firebase',
            frequency: 'manual',
            lastSync: null
        };

        // =============================================
        // INICIALIZA√á√ÉO DO FIREBASE
        // =============================================
        function inicializarFirebase() {
            try {
                firebase.initializeApp(firebaseConfig);
                firebaseDatabase = firebase.database();
                usandoFirebase = true;
                document.getElementById('firebase-status').innerHTML = 
                    '<span class="sync-indicator indicator-online"></span><span>Conectado</span>';
                document.getElementById('sync-indicator').className = 'sync-indicator indicator-online';
                document.getElementById('sync-message').textContent = 'Conectado ao Firebase';
                console.log("‚úÖ Firebase inicializado com sucesso!");
                carregarDoFirebase();
            } catch (e) {
                console.error("‚ùå Erro ao inicializar Firebase:", e);
                document.getElementById('firebase-status').innerHTML = 
                    '<span class="sync-indicator indicator-offline"></span><span>Erro na conex√£o</span>';
                document.getElementById('sync-indicator').className = 'sync-indicator indicator-offline';
                document.getElementById('sync-message').textContent = 'Erro na conex√£o com Firebase';
                mostrarNotificacao('Erro ao conectar ao Firebase', 'error');
            }
        }

        function salvarNoFirebase() {
            if (!usandoFirebase || !firebaseDatabase) return;

            const dados = {
                licitacoes: licitacoes,
                setores: setores,
                modalidades: modalidades,
                configuracao: {
                    secretaria: localStorage.getItem('config_secretaria') || 'Secretaria Municipal de Sa√∫de',
                    responsavel: localStorage.getItem('config_responsavel') || 'Jo√£o da Silva',
                    email: localStorage.getItem('config_email') || 'licitacoes@saude.example.com',
                    diasAlerta: localStorage.getItem('config_diasAlerta') || '7'
                },
                ultimaAtualizacao: firebase.database.ServerValue.TIMESTAMP
            };

            firebaseDatabase.ref('dados').set(dados)
                .then(() => {
                    syncConfig.lastSync = new Date().toISOString();
                    localStorage.setItem('ultimo_backup', new Date().toISOString());
                    document.getElementById('ultimo-backup').textContent = new Date().toLocaleString('pt-BR');
                    document.getElementById('last-sync').innerHTML = 
                        `<span>${new Date().toLocaleString('pt-BR')}</span>`;
                    adicionarHistoricoSincronizacao('Firebase', 'Sucesso', licitacoes.length);
                    mostrarNotificacao('‚úÖ Sincronizado com Firebase!', 'success');
                })
                .catch((error) => {
                    console.error("‚ùå Erro ao salvar no Firebase:", error);
                    mostrarNotificacao('Erro ao sincronizar com Firebase', 'error');
                });
        }

        function carregarDoFirebase() {
            if (!usandoFirebase || !firebaseDatabase) return;

            firebaseDatabase.ref('dados').once('value')
                .then((snapshot) => {
                    const dados = snapshot.val();
                    if (dados) {
                        licitacoes = dados.licitacoes || [];
                        setores = dados.setores || [];
                        modalidades = dados.modalidades || [];

                        if (dados.configuracao) {
                            localStorage.setItem('config_secretaria', dados.configuracao.secretaria);
                            localStorage.setItem('config_responsavel', dados.configuracao.responsavel);
                            localStorage.setItem('config_email', dados.configuracao.email);
                            localStorage.setItem('config_diasAlerta', dados.configuracao.diasAlerta);
                        }

                        atualizarInterface();
                        mostrarNotificacao('‚úÖ Dados carregados do Firebase!', 'success');
                    } else {
                        // Primeira vez: salvar dados locais no Firebase
                        salvarNoFirebase();
                    }
                })
                .catch((error) => {
                    console.error("‚ùå Erro ao carregar do Firebase:", error);
                });
        }

        // =============================================
        // FUN√á√ïES DE SINCRONIZA√á√ÉO
        // =============================================
        function sincronizarAgora() {
            if (!usandoFirebase) {
                mostrarNotificacao('Firebase n√£o conectado!', 'error');
                return;
            }
            document.getElementById('sync-indicator').className = 'sync-indicator indicator-syncing';
            document.getElementById('sync-message').textContent = 'Sincronizando...';
            salvarNoFirebase();
        }

        function carregarDoFirebase() {
            if (!usandoFirebase) {
                mostrarNotificacao('Firebase n√£o conectado!', 'error');
                return;
            }
            document.getElementById('sync-indicator').className = 'sync-indicator indicator-syncing';
            document.getElementById('sync-message').textContent = 'Carregando dados...';
            firebaseDatabase.ref('dados').once('value')
                .then((snapshot) => {
                    const dados = snapshot.val();
                    if (dados) {
                        licitacoes = dados.licitacoes || [];
                        setores = dados.setores || [];
                        modalidades = dados.modalidades || [];
                        atualizarInterface();
                        mostrarNotificacao('‚úÖ Dados recarregados do Firebase!', 'success');
                    }
                    document.getElementById('sync-indicator').className = 'sync-indicator indicator-online';
                    document.getElementById('sync-message').textContent = 'Conectado ao Firebase';
                });
        }

        function adicionarHistoricoSincronizacao(tipo, status, itens) {
            const history = JSON.parse(localStorage.getItem('syncHistory') || '[]');
            history.unshift({
                data: new Date().toISOString(),
                tipo: tipo,
                status: status,
                itens: itens
            });
            if (history.length > 10) history.pop();
            localStorage.setItem('syncHistory', JSON.stringify(history));
            atualizarHistoricoSincronizacao();
        }

        function atualizarHistoricoSincronizacao() {
            const history = JSON.parse(localStorage.getItem('syncHistory') || '[]');
            const tbody = document.getElementById('sync-history');
            if (!tbody) return;
            tbody.innerHTML = '';
            history.forEach(entry => {
                tbody.innerHTML += `
                    <tr>
                        <td>${new Date(entry.data).toLocaleString('pt-BR')}</td>
                        <td>${entry.tipo}</td>
                        <td>${entry.status}</td>
                        <td>${entry.itens}</td>
                    </tr>
                `;
            });
        }

        function alterarModoSincronizacao() {
            syncConfig.frequency = document.getElementById('sync-frequency').value;
            localStorage.setItem('syncConfig', JSON.stringify(syncConfig));
            // Reiniciar sincroniza√ß√£o autom√°tica se necess√°rio
        }

        // =============================================
        // SOBREESCRITA DAS FUN√á√ïES EXISTENTES
        // =============================================
        function salvarDados() {
            localStorage.setItem('licitacoes', JSON.stringify(licitacoes));
            localStorage.setItem('setores', JSON.stringify(setores));
            localStorage.setItem('modalidades', JSON.stringify(modalidades));
        }

        function carregarDados() {
            try {
                licitacoes = JSON.parse(localStorage.getItem('licitacoes')) || [];
                setores = JSON.parse(localStorage.getItem('setores')) || [];
                modalidades = JSON.parse(localStorage.getItem('modalidades')) || [];
                if (licitacoes.length === 0) {
                    licitacoes = [
                        {
                            id: 1,
                            numeroLicitacao: '001/2024',
                            objeto: 'Aquisi√ß√£o de Medicamentos B√°sicos',
                            modalidade: 'Preg√£o Eletr√¥nico',
                            setor: 'Farm√°cia',
                            valor: 150000,
                            valorFinal: 145000,
                            situacao: 'Em andamento',
                            dataAbertura: '2024-01-15',
                            dataConclusao: '2024-02-28',
                            responsavel: 'Maria Silva',
                            observacoes: 'Licita√ß√£o em fase de an√°lise t√©cnica'
                        }
                    ];
                }
                if (setores.length === 0) {
                    setores = [
                        {id: 1, nome: 'Farm√°cia', responsavel: 'Carlos Silva'},
                        {id: 2, nome: 'Administra√ß√£o', responsavel: 'Maria Oliveira'},
                        {id: 3, nome: 'Cl√≠nica M√©dica', responsavel: 'Jo√£o Santos'}
                    ];
                }
                if (modalidades.length === 0) {
                    modalidades = [
                        {id: 1, nome: 'Preg√£o Eletr√¥nico', descricao: 'Modalidade eletr√¥nica', ativa: true},
                        {id: 2, nome: 'Tomada de Pre√ßos', descricao: 'Para valores at√© R$ 1.000.000,00', ativa: true},
                        {id: 3, nome: 'Concorr√™ncia P√∫blica', descricao: 'Para valores acima de R$ 1.000.000,00', ativa: true}
                    ];
                }
                salvarDados();
            } catch (error) {
                console.error('Erro ao carregar dados:', error);
            }
        }

        // =============================================
        // INTEGRAR SINCRONIZA√á√ÉO NAS A√á√ïES
        // =============================================
        function salvarLicitacaoOriginal() {
            const dados = coletarDadosFormulario();
            if (!validarDadosLicitacao(dados)) return;
            if (editandoId === null) {
                dados.id = gerarNovoId();
                licitacoes.push(dados);
                mostrarNotificacao('‚úÖ Licita√ß√£o adicionada!', 'success');
            } else {
                const index = licitacoes.findIndex(l => l.id === editandoId);
                if (index !== -1) {
                    dados.id = editandoId;
                    licitacoes[index] = dados;
                    mostrarNotificacao('‚úÖ Licita√ß√£o atualizada!', 'success');
                }
            }
            salvarDados();
            fecharModal();
            atualizarInterface();
        }

        // Sobrescrever salvarLicitacao para incluir Firebase
        function salvarLicitacao() {
            salvarLicitacaoOriginal();
            if (usandoFirebase) {
                salvarNoFirebase();
            }
        }

        function excluirLicitacao(id) {
            if (confirm('‚ùì Tem certeza que deseja excluir esta licita√ß√£o?')) {
                licitacoes = licitacoes.filter(l => l.id !== id);
                salvarDados();
                atualizarInterface();
                mostrarNotificacao('‚úÖ Licita√ß√£o exclu√≠da!', 'success');
                if (usandoFirebase) {
                    salvarNoFirebase();
                }
            }
        }

        // =============================================
        // RESTANTE DO SEU C√ìDIGO (sem altera√ß√µes)
        // =============================================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Iniciando Sistema com Firebase...');
            carregarDados();
            inicializarFirebase();
            mostrarAba('dashboard');
            ajustarLayoutTabela();
            atualizarHistoricoSincronizacao();
        });

        // ... (todas as demais fun√ß√µes permanecem exatamente como no seu arquivo original: adicionarLicitacao, renderizarTabelaLicitacoes, etc.)

        // Por brevidade, mantive apenas as fun√ß√µes essenciais aqui.
        // O resto do seu c√≥digo (que j√° est√° completo) permanece inalterado.

        // Fun√ß√µes de utilidade (mantidas)
        function formatarMoeda(valor) {
            return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(valor);
        }
        function formatarData(dataString) {
            return new Date(dataString).toLocaleDateString('pt-BR');
        }
        function gerarNovoId() {
            return licitacoes.length > 0 ? Math.max(...licitacoes.map(l => l.id)) + 1 : 1;
        }
        function mostrarNotificacao(mensagem, tipo) {
            const notification = document.createElement('div');
            notification.className = `notification ${tipo}`;
            notification.textContent = mensagem;
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; padding: 15px 25px;
                border-radius: 8px; color: white; font-weight: 600; z-index: 10000;
                background: ${tipo === 'success' ? '#4caf50' : tipo === 'error' ? '#f44336' : '#ff9800'};
            `;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }

        // NOTA: Todas as outras fun√ß√µes (mostrarAba, renderizarTabelaLicitacoes, atualizarDashboard, etc.)
        // devem permanecer exatamente como no seu arquivo original.
        // Elas j√° est√£o implementadas e funcionais.

        console.log('‚úÖ Sistema com Firebase carregado!');
    </script>
</body>
</html>